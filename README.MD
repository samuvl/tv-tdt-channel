# TV TDT Channel - Generador de Playlist IPTV Espa√±a

Un proyecto Python para descargar, filtrar y generar playlists IPTV compatibles con Smart TVs Samsung (SS IPTV, Smart IPTV, IPTV Smarters Pro) con numeraci√≥n est√°ndar TDT de Espa√±a.

## üéØ Objetivo

Este proyecto nace de la necesidad de crear una lista de canales personalizada para una TV Samsung QLED de una persona mayor, que quiere acceder f√°cilmente a los canales principales de la TDT espa√±ola con una numeraci√≥n clara y ordenada. El resultado es un archivo `lista_channels.m3u` personalizado con los canales que desees en el orden y numeraci√≥n que prefieras.

## üîß Requisitos

- **Python 3.6+**
- **requests** - Para descargar la fuente oficial

Instala dependencias:
```bash
pip install requests
```

## üìã Descripci√≥n General

El proyecto sigue un flujo de 4 pasos:

```
1. Descubrir canales disponibles
         ‚Üì
2. Crear lista de canales deseados
         ‚Üì
3. Construir la playlist M3U
         ‚Üì
4. Probar en un reproductor IPTV
         ‚Üì
üì∫ lista_channels.m3u (RESULTADO FINAL)
```

## üîÑ Flujo Detallado

### Paso 1: Descubrir Canales Disponibles
**Archivo:** `1-discovery_channels.py`

Este script descarga la lista oficial de canales TDT de Espa√±a desde la fuente IPTV comunitaria y muestra todos los canales disponibles con sus metadatos (nombre, grupo, resoluci√≥n, URL).

**Fuente de datos:** [IPTV-ORG](https://iptv-org.github.io/iptv/countries/es.m3u) - Playlist comunitaria actualizada de canales IPTV Espa√±a

```bash
python 1-discovery_channels.py
```

**Salida:** `1.1-discovery_channels_result.txt` - Lista de todos los canales disponibles

**Uso:** Ejecuta este script cuando quieras ver QU√â canales existen en la fuente oficial para decidir cu√°les incluir en tu playlist.

---

### Paso 2: Crear Lista de Canales Deseados
**Archivo:** `2-channels_list.txt`

Archivo de configuraci√≥n donde defines:
- ‚úÖ **Qu√© canales quieres** (uno por l√≠nea)
- üìä **En qu√© orden** (l√≠nea 1 = Canal 001, l√≠nea 2 = Canal 002, etc.)

**Estructura:**
```
La 1 (720p)
La 2 (1080p)
Antena 3 (1080p)
Cuatro (1080p)
...
```

**Notas importantes:**
- El nombre debe coincidir EXACTAMENTE con uno de la fuente (verifica en `1.1-discovery_channels_result.txt`)
- El ORDEN determina la NUMERACI√ìN en la playlist TDT simulada
- Puedes incluir resoluciones en el nombre, se limpiar√°n autom√°ticamente si lo deseas (configurable)

**Archivo de backup:** `2.1-channels_list_backup.txt` - Este archivo contiene los posibles canales que quer√≠as incluyendo, ordenados por categor√≠as (TDT, cine, deportes, etc.). √ösalo como referencia para seleccionar los canales que desees en `2-channels_list.txt`

---

### Paso 3: Construir la Playlist M3U
**Archivo:** `3-build_playlist.py`

Script principal que:
1. ‚úÖ Descarga la lista oficial de Espa√±a
2. üîç Filtra solo los canales que est√°n en `2-channels_list.txt`
3. üìù Genera la playlist M3U con:
   - Numeraci√≥n autom√°tica (001, 002, 003, etc.)
   - Nombres limpios (opcional: elimina resoluciones)
   - Prefijos num√©ricos (opcional: para forzar orden alfab√©tico)
   - Group-title personalizable
4. üíæ Exporta a `lista_channels.m3u`

**Ejecuci√≥n:**
```bash
python 3-build_playlist.py
```

**Configuraci√≥n** (dentro del script):
```python
# Modo de group-title
GROUP_TITLE_MODE = "unique"  # "unique", "custom", "original", "none"
UNIQUE_GROUP_NAME = "TDT Espa√±a"

# A√±adir prefijos num√©ricos
ADD_NUMERIC_PREFIX = True    # "001. La 1", "002. La 2", etc.

# Limpiar resoluciones
CLEAN_CHANNEL_NAMES = True   # "La 1" en lugar de "La 1 (720p)"
```

**Salida:** `lista_channels.m3u` - Tu playlist IPTV personalizada

**Debug:** `3.1-build_playlist_debug.txt` - Informaci√≥n detallada de qu√© se proces√≥ y si hay errores

---

### Paso 4: Probar en Reproductor IPTV
**Archivo:** `4-test_iptv_player.html`

Una interfaz HTML simple para probar la playlist generada sin necesidad de un TV.

**Uso en navegador:**
1. Abre el archivo en tu navegador
2. Carga `lista_channels.m3u` 
3. Prueba que todos los canales carguen correctamente

**Uso en VLC Player:**

Si prefieres usar VLC Player para reproducir la playlist:

1. Abre VLC Player
2. Ve a **Media** ‚Üí **Abrir archivo**
3. Selecciona `lista_channels.m3u`
4. Se abrir√° la lista de reproducci√≥n con todos tus canales
5. Haz doble clic en cualquier canal para reproducirlo
6. Usa las flechas o el men√∫ de reproducci√≥n para cambiar de canal

**Ventajas de VLC:**
- ‚úÖ Reproductor profesional y confiable
- ‚úÖ Funciona en Windows, Mac y Linux
- ‚úÖ Interfaz familiar y f√°cil de usar
- ‚úÖ Perfecto para personas mayores

Esta es una herramienta √∫til para verificar que la playlist est√° bien formada antes de usarla en tu TV.

---

## üöÄ C√≥mo Usar (Gu√≠a R√°pida)

### Primera vez:
```bash
# 1. Ver qu√© canales est√°n disponibles
python 1-discovery_channels.py

# 2. Editar 2-channels_list.txt con tus canales deseados
# (Abre con tu editor de texto favorito)

# 3. Generar la playlist
python 3-build_playlist.py

# 4. Probar (opcional)
# Abre 4-test_iptv_player.html en el navegador
```

### Actualizaciones:
Si quieres cambiar el orden o los canales:
1. Edita `2-channels_list.txt`
2. Ejecuta `python 3-build_playlist.py`
3. Copia `lista_channels.m3u` a tu TV

---

## üìÑ Archivos del Proyecto

| Archivo | Tipo | Descripci√≥n |
|---------|------|-------------|
| `1-discovery_channels.py` | Script | Descubre canales disponibles en la fuente |
| `1.1-discovery_channels_result.txt` | Salida | Lista de canales encontrados |
| `2-channels_list.txt` | Configuraci√≥n | Canales que quieres y su orden |
| `2.1-channels_list_backup.txt` | Backup | Copia de seguridad de la configuraci√≥n |
| `3-build_playlist.py` | Script | Genera la playlist M3U personalizada |
| `3.1-build_playlist_debug.txt` | Debug | Informaci√≥n de proceso y errores |
| `4-test_iptv_player.html` | Herramienta | Prueba la playlist en el navegador |
| `lista_channels.m3u` | **RESULTADO** | **Tu playlist IPTV final** |
| `README.MD` | Documentaci√≥n | Este archivo |

---

## üí° Caracter√≠sticas

‚úÖ **Numeraci√≥n autom√°tica** - Asigna n√∫meros 001-999 seg√∫n el orden de `2-channels_list.txt`

‚úÖ **Compatible con Smart TVs Samsung** - Probado con:
- SS IPTV
- Smart IPTV
- IPTV Smarters Pro

‚úÖ **Compatible con otros reproductores:**
- VLC Player
- Navegadores web

‚úÖ **Nombres limpios** - Opcional: elimina resoluciones (720p, 1080p) de los nombres

‚úÖ **Prefijos num√©ricos** - Fuerza el orden correcto en apps que ordenan alfab√©ticamente

‚úÖ **Group-title personalizable** - Agrupa todos en "TDT Espa√±a" o mant√©n grupos originales

‚úÖ **Flexible** - Incluye solo los canales que quieras, en el orden que desees

---

## üîß Requisitos

- **Python 3.6+**
- **requests** - Para descargar la fuente oficial

Instala dependencias:
```bash
pip install requests
```

---

## üìù Formato M3U

La playlist generada sigue el est√°ndar M3U:

```
#EXTM3U
#EXTINF:-1 tvg-name="La 1" tvg-logo="..." group-title="TDT Espa√±a",001. La 1
https://...url...
#EXTINF:-1 tvg-name="La 2" tvg-logo="..." group-title="TDT Espa√±a",002. La 2
https://...url...
```

---

## üåê Fuentes Utilizadas

- **IPTV-ORG** (`https://iptv-org.github.io/`) - Playlist comunitaria y actualizada de canales IPTV Espa√±a

---

## üìå Notas Importantes

1. **El orden importa** - El orden en `2-channels_list.txt` determina la numeraci√≥n final
2. **Nombres exactos** - Los nombres deben coincidir EXACTAMENTE con los de la fuente
3. **Actualizaci√≥n de URLs** - Las URLs de los streams pueden cambiar. Si dejan de funcionar, vuelve a ejecutar `1-discovery_channels.py` y `3-build_playlist.py`
4. **Uso legal** - Los canales TDT son emisi√≥n legal en Espa√±a. Este proyecto es solo un filtro/reorganizador

---

## ü§ù GitHub Actions - CI/CD Pipeline

Este repositorio incluye un pipeline automatizado con GitHub Actions que valida y genera la playlist autom√°ticamente.

### ¬øQu√© hace el pipeline?

El workflow autom√°tico se ejecuta cuando:
- Haces push a cambios en `2-channels_list.txt`
- Haces push a cambios en `3-build_playlist.py`
- Ejecutas manualmente el workflow desde GitHub

**Proceso autom√°tico:**
1. ‚úÖ Descarga la lista oficial de canales
2. üîç Valida que todos los canales en `2-channels_list.txt` existan en la fuente
3. üìù Genera autom√°ticamente `lista_channels.m3u`
4. üìä Crea un reporte de debug en `3.1-build_playlist_debug.txt`
5. üíæ Commit autom√°tico con los archivos generados

### C√≥mo usar GitHub Actions desde la web

1. **Ir a la pesta√±a Actions**
   - En tu repositorio de GitHub, haz clic en la pesta√±a **Actions**

2. **Seleccionar el workflow**
   - Ver√°s el workflow "Build IPTV Playlist"
   - Haz clic en √©l

3. **Ejecutar manualmente (Manual Trigger)**
   - En el lado derecho ver√°s un bot√≥n **"Run workflow"**
   - Haz clic en √©l para generar la playlist al instante
   - Selecciona la rama (normalmente `main`)

4. **Ver el resultado**
   - El workflow se ejecutar√° autom√°ticamente
   - Puedes ver el progreso en tiempo real
   - Una vez finalizado, ver√°s un ‚úÖ si fue exitoso o un ‚ùå si hay errores

5. **Descargar el resultado**
   - Los archivos generados se guardan autom√°ticamente en el repositorio
   - Puedes descargar `lista_channels.m3u` directamente desde GitHub
   - En la rama `main`, entra en el archivo y desc√°rgalo

### Ventajas del pipeline

‚úÖ **Automatizado** - No necesitas ejecutar scripts localmente

‚úÖ **Validaci√≥n** - Verifica autom√°ticamente que los nombres sean correctos

‚úÖ **Historial** - Puedes ver todos los cambios en el historial de Actions

‚úÖ **F√°cil de usar** - Interfaz gr√°fica en GitHub, sin terminal

‚úÖ **Commits autom√°ticos** - Guarda los cambios autom√°ticamente

### Workflow t√≠pico con GitHub Actions

1. Edita `2-channels_list.txt` directamente en GitHub
2. Haz commit desde la web de GitHub
3. El pipeline se ejecuta autom√°ticamente
4. Tu `lista_channels.m3u` se genera autom√°ticamente
5. Descarga el archivo desde GitHub

---

## üìÑ Licencia

Proyecto personal para uso con canales TDT p√∫blicos de Espa√±a.

---

## üìû Troubleshooting

### "Canal no encontrado"
‚Üí Verifica el nombre exacto en `1.1-discovery_channels_result.txt`

### "Algunas URLs no funcionan"
‚Üí Las fuentes pueden cambiar. Ejecuta nuevamente `1-discovery_channels.py` y `3-build_playlist.py`

### "La playlist se ve desordenada en mi TV"
‚Üí Activa `ADD_NUMERIC_PREFIX = True` en `3-build_playlist.py`

### "Veo resoluciones en los nombres (720p, 1080p)"
‚Üí Activa `CLEAN_CHANNEL_NAMES = True` en `3-build_playlist.py`

---

**Versi√≥n:** 1.0
**√öltima actualizaci√≥n:** 2026
